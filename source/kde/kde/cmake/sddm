if [ "$SLACKPAM" == "no" ]; then
  DO_SLACKPAM="-DENABLE_PAM:BOOL=OFF"
else
  DO_SLACKPAM="-DENABLE_PAM:BOOL=ON"
fi

if [ "$SLKELOGIND" == "no" ]; then
  DO_SLKELOGIND=""
else
  DO_SLKELOGIND=" \
    -DNO_SYSTEMD:BOOL=TRUE \
    -DUSE_ELOGIND:BOOL=TRUE \
    "
fi

mkdir -p cmake-build
cd cmake-build
  cmake \
    $DO_SLACKPAM \
    $DO_SLKELOGIND \
    -DCMAKE_BUILD_TYPE=Release \
    -DCMAKE_C_FLAGS:STRING="$SLKCFLAGS" \
    -DCMAKE_C_FLAGS_RELEASE:STRING="$SLKCFLAGS" \
    -DCMAKE_CXX_FLAGS:STRING="$SLKCFLAGS" \
    -DCMAKE_CXX_FLAGS_RELEASE:STRING="$SLKCFLAGS" \
    -DCMAKE_INSTALL_PREFIX=/usr \
    -DCMAKE_INSTALL_MANDIR=/usr/man \
    -DLIB_SUFFIX=${LIBDIRSUFFIX} \
    -DBUILD_MAN_PAGES:BOOL=TRUE \
    -DDBUS_CONFIG_FILENAME="org.freedesktop.sddm.conf" \
    -DUSE_QT4:BOOL=FALSE \
    -DUSE_QT5:BOOL=TRUE \
    -DENABLE_JOURNALD:BOOL=FALSE \
    ..

